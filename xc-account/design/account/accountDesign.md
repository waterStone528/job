#### 相关的表（主要信息）
1. 科目类型表
```
属性（资产还是负债/所有者权益）
```
2. 科目余额表
```
平台 | 科目 | 余额
```
3. 科目变更日志表
```
平台 | 科目 | 昨日期末余额 | 本期借方金额 | 本期贷方余额 | 本期期末余额 | 记账日期
```

##### 账户检查流程-简化版
1. 日切。零点，记账日期从T日变更为T+1。
2. 科目平衡检查。T-1日的《科目余额表》“科目余额” =《科目变更日志表》的“本期期末余额”。如产生差错，则停止。
3. 从外部获取各个科目的变更额。
4. 当日账户平衡。T日，SUM(借方发生额)=SUM（贷方发生额)。如发生差错，则停止。
5. 生成《科目变更日志表》T日记录。
6. 更新《科目余额表》余额及记账时间。
7. 总分检查。《科目余额表》中各科目的“科目余额”=SUM（《账户余额表》该科目的各账户“昨日余额”。从外部获取）。如发生差错，则停止。
8. 总账余额平衡。《科目余额表》中，SUM(资产类科目余额)=SUM(负债及所有者权益余额)。如发生错误，则记录至账户不平科目。
9. 虚实对账。银行或三方提供的T日期末余额 = 银行存款或三方备付金科目余额。
10. 应收账款确认。各应收账款科目余额清零，银行存款或三方备付金科目余额增加。

#### 生成的记录（主要信息）-简化版
1. 通道对账记录。
```
通道编号 | 对账结果 | 出入金金额
```
2. 通道对账差错明细。
```
通道编号 | 差错明细
```
3. 账户检查记录，对每一步检查的结果做记录。
```
记账日期 | 检查步骤 | 检查结果 | 说明
```
4. 应收账款确认记录。
```
科目 | 确认金额 | 记账日期 
```
5.  虚实对账结果记录。
```
虚拟资金 | 真实资金 | 对账结果 | 差额 | 记账日期
```

#### 差错处理
所有差错，均人工处理。



#### 账户检查流程-复杂版
1. 日切。零点，记账日期从T日变更为T+1。
2. 通道对账。产生对账记录、差错，记录每个通道的出入金金额。
3. 科目平衡检查。T-1日的《科目余额表》“科目余额” =《科目变更日志表》的“本期期末余额”。如产生差错，则停止。
4. 根据《账户变更日志表》，计算每个账户的T日变更额，更新《账户余额表》中相应账户的昨日余额。统计出T日所有账户的SUM(借方发生额)，SUM（贷方发生额)。
5. 当日账户平衡。T日，SUM(借方发生额)=SUM（贷方发生额)。如发生差错，则停止。
6. 账户今昨检查。《账户余额表》的“昨日余额”=T日《账户变更日志表》账户的最后一笔记录的“现在金额”。如有差错，则停止。需对《账户明细表》记录进行连续检查。
7. 生成《科目变更日志表》T日记录。
8. 更新《科目余额表》余额及记账时间。
9. 总分检查。《科目余额表》中各科目的“科目余额”=SUM（《账户余额表》该科目的各账户“昨日余额”）。如发生差错，则停止。
10. 总账余额平衡。《科目余额表》中，SUM(资产类科目余额)=SUM(负债及所有者权益余额)。如发生错误，则记录至账户不平科目。
11. 应收账款确认。会计人员人工查看实际入金或调用接口查询入金或根据通道对账统计入金，完成各入金方（通联、支付宝、微信等）的应收账款确认，即应收账款账户减少，银行存款或三方备付金账户增加，记账日期为T+1。生成应收账款确认记录，生成或更新T日应收账款差额。
12. 入金金额检查。各入金方T日《应收账款差额》的“应收账款差额”=SUM(通道对账差错金额)。如差错，继续执行。
13. 已付账款确认。会计人员人工查看实际出金或调用接口查询出金或根据通道对账统计出金，完成已付账款确认，即银行存款或三方备付金账户减少，已付账款账户增加，记账日期为T+1。生成已付账款确认记录，生成或更新T日已付账款差额。
14. 出金金额检查。《已付账款余额表》的“应付账款差额”=SUM(出金通道对账的差错金额)。如差错，继续执行。
15. 虚实对账。《科目余额表》的“银行存款”或“三方备付金” + 《科目余额表》的各入金方的“应收账款” - 《科目余额表》的“已付账款” +T日《应收账款差额表》的“差额” + T日《已付账款差额表》的“差额” = T日的实际资金。

#### 生成的记录（主要信息）-复杂版
1. 通道对账记录。
```
通道编号 | 对账结果 | 出入金金额
```
2. 通道对账差错明细。
```
通道编号 | 差错明细
```
3. 账户检查记录，对每一步检查的结果做记录。
```
记账日期 | 检查步骤 | 检查结果 | 说明
```
4. 应收账款确认记录。
```
科目 | 确认金额 | 记账日期 
```
6. 应收账款差额。
```
科目 | 差额 | 记账日期
```
7. 已付账款确认记录。
```
科目 | 确认金额 | 记账日期
```
8. 已付账款差额。
```
科目 | 差额 | 记账日期
```
9.  虚实对账结果记录。
```
虚拟资金 | 真实资金 | 对账结果 | 差额 | 记账日期
```